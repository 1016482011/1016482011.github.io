---
title: 前端代码规范整理04 -js
author: 陈龙
date: 2019-02-20 08:58:51
tags: [javascript]
categories: [javascript]
---

#### 数组

使用拓展运算符 `...`

```js
// bad
const items = []
const itemsCopy = []
const len = items.length
let i

// bad
for (i = 0; i < len; i++) {
  itemsCopy[i] = items[i]
}

// good
itemsCopy = [...items]
```

当需要使用数组的多个值时，请使用解构赋值

```js
const arr = [1, 2, 3, 4]

// bad
const first = arr[0]
const second = arr[1]

// good
const [first, second] = arr
```

字符串太长的时候，请不要使用字符串连接符换行 \，而是使用 +

```js
const str =
  'sting sting sting sting' +
  'sting sting sting sting' +
  'sting sting sting sting'
```

#### 函数

请使用函数声明，而不是函数表达式

```js
// bad
const foo = function() {
  // do something
}

// good
function foo() {
  // do something
}
```

不要在非函数代码块中声明函数

```js
// bad
if (isUse) {
  function test() {
    // do something
  }
}

// good
let test
if (isUse) {
  test = () => {
    // do something
  }
}
```

不要使用 `arguments`，可以选择使用 `...`,`arguments` 只是一个类数组，而 `...` 是一个真正的数组

```js
// bad
function test() {
  const args = Array.prototype.slice.call(arguments)
  return args.join('')
}

// good
function test(...args) {
  return args.join('')
}
```

不要更改函数参数的值

```js
// bad
function test(opts) {
  opts = opts || {}
}

// good
function test(opts = {}) {
  // ...
}
```

### 原型

使用 class，避免直接操作 `prototype`

```js
// bad
function Queue (contents = []) {
  this._queue = [..contents]
}
Queue.prototype.pop = function () {
  const value = this._queue[0]
  this._queue.splice(0, 1)
  return value
}

// good
class Queue {
  constructor (contents = []) {
    this._queue = [...contents]
  }

  pop () {
    const value = this._queue[0]
    this._queue.splice(0, 1)
    return value
  }
}
```

### 迭代器

不要使用 iterators

```js
const numbers = [1, 2, 3, 4, 5]

// bad
let sum = 0
for (let num of numbers) {
  sum += num
}

// good
let sum = 0
numbers.forEach(num => (sum += num))

// better
const sum = numbers.reduce((total, num) => total + num, 0)
```
